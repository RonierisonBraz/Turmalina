<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turmalina</title>
</head>

<body>
    <h2>TESTE DE APRESENTAÇÃO DE PRODUTOS DA CATEGORIA</h2>

    <% var nome;  %> 
    <% for (let produtos of Produtos) { %>

        <p>Entrou no laco</p>
        
        <img src=<%=produtos.img %> alt="Imagem do produto" id="img-produto">
        <strong> <%= produtos.nome %> </strong>
        <!-- NAO CONSEGUE PEGAR idProduto porque não passa pr o script -->

        <% nome = produtos.nome; %> 
            <script>

                var pegar_nome = "<%= nome %>";
                console.log(pegar_nome);

                document.getElementById("img-produto").onclick = function () { telaProduto(pegar_nome) };
                function telaProduto(nome) {
                    console.log("TA INDO");
                    window.location.href = 'http://localhost:3000/catalogo/categoria/'+nome;
                }



                // let idProduto = 3;

                // console.log("HI, THERE!");
                // console.log(idProduto);

                // document.getElementById("img-produto").onclick = function () { telaProduto(idProduto) };
                // function telaProduto(id) {

                //     fetch(`http://localhost:3000/catalogo/categoria/${id}`, {
                //         "method": "POST",
                //         "headers": {}
                //     })
                //         .then(response => {
                //             console.log(response);
                //         })
                //         .catch(err => {
                //             console.error(err);
                //         });
                // }

            </script>

            <% } %>

</body>

</html>